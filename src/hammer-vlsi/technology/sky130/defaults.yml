# Settings for the sky130 technology to be overriden by the project.
technology.sky130:
  sky130_pdk: "PATH_TO_SKY130_PDK"
  sky130_nda: "PATH_TO_NDA_FILES"
  sky130A: "PATH_TO_SKY130A_DIR"
  dffram_lib: "PATH_TO_DFFRAM/Compiler/build"
  openram_lib: "PATH_TO_sky130_fd_bd_sram/macros"

  gds_map_file: "PATH_TO_GDS_MAP_FILE (you must write this file)"
  lvs_deck_sources: 
    - "/tools/commercial/skywater/swtech130/skywater-src-nda/s8/V2.0.1/LVS/Calibre/lvsControlFile_s8"

# Set some defaults for this technology.
vlsi:
  # Technology dimension
  core:
    node: 130
    sram_generator_tool: "sram_compiler"
    sram_generator_tool_path: ["${HAMMER_HOME}/src/hammer-vlsi/technology/sky130"]
    sram_generator_tool_path_meta: "append"
  inputs:
    # Supply voltages.
    supplies:
        power: [{name: "VDD", pin: "VPWR"}]
        ground: [{name: "VSS", pin: "VGND"}]
        VDD: "1.8 V"
        GND: "0 V"

    dont_use_list: ["*sdf*"] # Scan flops go haywire! Avoid them. 
    
    # mmmc corners config
    mmmc_corners: [
      {
        "name": "sky130_fd_sc_hd__ss_100C_1v60",
        "type": "setup",
        "voltage": "1.60 V",
        "temp": "100 C"
      },
      {
        "name": "sky130_fd_sc_hd__ff_n40C_1v95",
        "type": "hold",
        "voltage": "1.95 V",
        "temp": "-40 C"
      }
    ]
  technology:
    # Set standard cell LEF placement site
    placement_site: "unithd"

    # Set the layer that blocks vias under bumps
    # nk - not sure if this is right??
    bump_block_cut_layer: "via4"

    # Set the interval and offset for tap cells
    # nk - not sure if this is right??
    tap_cell_interval: "27"
    tap_cell_offset: "5"

technology.core:
  # This key should exist in the stackups list in the tech json
  stackup: "sky130_fd_sc_hd"
  # This should specify the TOPMOST metal layer the standard cells use for power rails
  # Note that this is not usually stackup specific; it is based on the std cell libraries themselves
  std_cell_rail_layer: "met1" 
  # This is used to provide a reference master for generating standard cells
  tap_cell_rail_reference: "{sky130_fd_sc_hd__tap*}"

par.inputs:
  gds_merge: true
  

# Calibre environment variables
mentor.extra_env_vars:
  - PDK_HOME: "/tools/commercial/skywater/swtech130/skywater-src-nda/s8/V2.0.1"